llm:
  providers:
    deepseek:
      type: "openai_compatible"
      api_key: "${DEEPSEEK_API_KEY}"
      base_url: "https://api.deepseek.com"
      default_model: "deepseek-chat"
      json_mode: true

    openai:
      type: "openai_compatible"
      api_key: "${OPENAI_API_KEY}"
      base_url: "https://api.openai.com/v1"
      default_model: "gpt-4o-mini"
      json_mode: true

    gemini:
      type: "openai_compatible"
      api_key: "${GEMINI_API_KEY}"
      base_url: "https://generativelanguage.googleapis.com/v1beta/openai"
      default_model: "gemini-2.5-flash-lite"
      json_mode: true

    claude:
      type: "anthropic"
      api_key: "${ANTHROPIC_API_KEY}"
      default_model: "claude-sonnet-4-5-20250514"

    claude_cli:
      type: "claude_code"
      default_model: "sonnet"
      timeout: 300

    # Local LLM via Ollama (start with: docker compose --profile local-llm up ollama)
    # Then pull a model: docker compose exec ollama ollama pull llama3.2:3b
    ollama:
      type: "openai_compatible"
      base_url: "http://ollama:11434/v1"
      api_key: "ollama"
      default_model: "llama3.2:3b"
      max_retries: 5
      timeout: 300

  tasks:
    summarize: { provider: "openai" }
    label_clusters: { provider: "openai" }
    crossref: { provider: "deepseek" }
    projections: { provider: "deepseek" }
    deep_dive: { provider: "openai", model: "gpt-4.1-mini" }

sources:
  rss:
    enabled: true
    feeds:
      tech:
        - url: "https://feeds.arstechnica.com/arstechnica/technology-lab"
          name: "Ars Technica"
        - url: "https://www.theverge.com/rss/ai-artificial-intelligence/index.xml"
          name: "The Verge AI"
        - url: "https://techcrunch.com/category/artificial-intelligence/feed/"
          name: "TechCrunch AI"
        - url: "https://blog.google/technology/ai/rss/"
          name: "Google AI Blog"
        - url: "https://openai.com/blog/rss.xml"
          name: "OpenAI Blog"
      geopolitics:
        - url: "https://feeds.bbci.co.uk/news/world/rss.xml"
          name: "BBC World"
        - url: "https://rss.nytimes.com/services/xml/rss/nyt/World.xml"
          name: "NYT World"
        - url: "https://www.aljazeera.com/xml/rss/all.xml"
          name: "Al Jazeera"
      finance:
        - url: "https://feeds.bloomberg.com/markets/news.rss"
          name: "Bloomberg Markets"
        - url: "https://www.ft.com/?format=rss"
          name: "Financial Times"
        - url: "https://finance.yahoo.com/news/rssindex"
          name: "Yahoo Finance"

  gdelt:
    enabled: false
    max_articles: 50

  serper:
    enabled: false
    api_key: "${SERPER_API_KEY}"
    queries:
      tech:
        - "artificial intelligence breakthroughs"
        - "AI regulation news"
      geopolitics:
        - "geopolitical tensions"
        - "international relations major events"
      finance:
        - "financial markets major moves"
        - "central bank policy changes"

process:
  dedup:
    enabled: true
    hash_exact: true
    cosine_threshold: 0.85

  cluster:
    enabled: true
    distance_threshold: 0.6
    min_cluster_size: 2

  embeddings:
    model: "minishlab/potion-base-8M"

analyze:
  crossref:
    enabled: true
  projections:
    enabled: true
  trends:
    enabled: false

deliver:
  telegram:
    enabled: true
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"
    max_message_length: 4096
    # "mini_app" (default) ‚Äî HTML digest in Telegram webview via signed GCS URL
    # "pdf" ‚Äî PDF file attachment
    digest_format: "mini_app"
  mini_app:
    gcs_bucket: "${GCS_DIGEST_BUCKET}"

pipeline:
  max_articles_per_topic: 30
  max_article_age_hours: 24
  max_concurrent_summaries: 10
  topics:
    - tech
    - geopolitics
    - finance
  topic_display:
    tech:
      label: "TECH & AI"
      emoji: "\U0001f4bb"           # üíª
      color: [0, 122, 204]          # blue
    geopolitics:
      label: "GEOPOLITICS"
      emoji: "\U0001f30d"           # üåç
      color: [178, 34, 34]          # red
    finance:
      label: "FINANCE"
      emoji: "\U0001f4c8"           # üìà
      color: [0, 128, 0]            # green

database:
  path: "data/intel.db"
